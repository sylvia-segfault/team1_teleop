<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/roslibjs/1.1.0/roslib.min.js"></script>

<script src="ros_connection.js"></script>
<script src="listeners.js"></script>
<script src="commands.js"></script>

<script type="text/javascript">
  var poses = [] // keep track of poses
  var lift_pos = 0.0
  var arm_pos = 0.0
  var gripper_pos = 0.0
  var wrist_pos = 0.0
  var head_pan_pos = 0.0
  var head_tilt_pos = 0.0

  save_seq_poses = function () {
    const pose = [
      Number(lift_pos),
      Number(arm_pos),
      Number(gripper_pos),
      Number(wrist_pos),
      Number(head_pan_pos),
      Number(head_tilt_pos),
    ]
    poses.push(pose)

    const anchor = document.getElementById("saved_poses");
    const num = poses.length;
    const button = document.createElement('button');
    button.setAttribute('name', 'pose' + num);
    button.setAttribute('text', 'pose ' + num);
    button.textContent = 'pose ' + num;
    button.onclick = function() {
      move_to_pose(pose);
    }
    anchor.appendChild(button);
  }


</script>
</head>

<body>
  <h1>ROS User Interface</h1>
  <p>Connection status: <span id="status"></span></p>
  <p>Head Pan position: <span id="head_pan_msg"></span></p>
  <p>Head Tilt position: <span id="head_tilt_msg"></span></p>
  <p>Lift position: <span id="lift_msg"></span></p>
  <p>Arm position: <span id="arm_msg"></span></p>
  <p>Wrist position: <span id="wrist_msg"></span></p>
  <p>Gripper position: <span id="grip_msg"></span></p>
  
  
  <div id="saved_poses">
  </div>

  <form id="form">
    <label for="pan_input">Pan Location:</label>
    <input type="number" id="pan_input" name="pan_input" step="0.05">
    <br>
    <label for="tilt_input">Tilt Location:</label>
    <input type="number" id="tilt_input" name="tilt_input" step="0.05">
    <br>
    <label for="lift_input">Lift Location:</label>
    <input type="number" id="lift_input" name="lift_input" step="0.05" min="0.25" max="1">
    <br>
    <label for="arm_input">Arm Location:</label>
    <input type="number" id="arm_input" name="arm_input" step="0.05" min="0" max="0.5">
    <br>
    <label for="wrist_input">Wrist Location:</label>
    <input type="number" id="wrist_input" name="wrist_input" step="0.1">
    <br>
    <label for="grip_input">Gripper Location:</label>
    <input type="number" id="grip_input" name="grip_input" step="10">
    <br>
  </form>

  <button onclick="move_pan()">Set Pan</button>
  <button onclick="move_tilt()">Set Tilt</button>
  <button onclick="move_lift()">Set Lift</button>
  <button onclick="move_arm()">Set Arm</button>
  <button onclick="move_wrist()">Set Wrist</button>
  <button onclick="move_grip()">Set Grip</button>
  <br><br>
  <button onclick="save_seq_poses()">Save Poses</button>
</body>
</html>